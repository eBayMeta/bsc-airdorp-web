"use strict";const t=require("../../common/vendor.js"),e=require("../../api/index.js"),i=require("../../composables/useBNBTransfer.js"),n=require("../../common/assets.js"),{sendBNB:o,debugAmountConversion:s,error:r,isLoading:a}=i.useBNBTransfer(),d={components:{BottomMenu:()=>"../../components/bottom-menu/index.js"},data:()=>({bindAddress:"",title:"Hello",training:{},time:"00:00:00",canBind:!1,Start:!1,timeShow:!1,navshows:!0}),onLoad(){t.index.setStorageSync("down","")},onShow(){window.sessionStorage.getItem("account")&&(this.address=window.sessionStorage.getItem("account"),this.getTraining()),window.sessionStorage.getItem("invite")&&(this.bindAddress=window.sessionStorage.getItem("invite"))},methods:{async getTraining(){let t=await e.getTraining(this.address);if(this.training=t.data.data,this.training.canBind)if(this.canBind=!1,this.training.canTrain)this.Start=!0;else{const t=new Date(this.training.trainingLastTime).getTime()+60*this.training.trainingIntervalHours*60*1e3,e=(new Date).getTime();if(e<t){const i=Math.floor((t-e)/1e3);this.countDown(i),this.Start=!1,this.timeShow=!0}else this.Start=!0,this.timeShow=!1}else this.canBind=!0},countDown(t){let e=setInterval((()=>{t--,this.time=this.getFormatTime(t),t<0&&clearInterval(e)}),1e3)},getFormatTime(t){let e=Math.floor(t/60/60),i=Math.floor(t/60%60),n=Math.floor(t%60);return e=e<10?"0"+e:e,i=i<10?"0"+i:i,n=n<10?"0"+n:n,`${e}:${i}:${n}`},async bind(){clearTimeout(this.timers),this.timers=setTimeout((async()=>{if(this.canBind){if(!this.bindAddress)return void t.index.showToast({title:"Please enter the binding address",icon:"none"});if(t.index.getStorageSync("down"))return;let i=(await e.getPayType("bind")).data.data;const n=await o(window.sessionStorage.getItem("account"),i.receiveAddress,i.receiveAmount);n.txHash&&await e.bindTraining(this.address,n.txHash,this.bindAddress,i.receiveAddress,i.receiveAmount),t.index.setStorageSync("down","asdad")}if(this.Start){let t=(await e.getPayType("training")).data.data;const i=await o(window.sessionStorage.getItem("account"),t.receiveAddress,t.receiveAmount);i.txHash&&await e.training(this.address,i.txHash,t.receiveAddress,t.receiveAmount)}this.getTraining()}),500)}}};if(!Array){(t.resolveComponent("path")+t.resolveComponent("g")+t.resolveComponent("rect")+t.resolveComponent("clipPath")+t.resolveComponent("defs")+t.resolveComponent("svg")+t.resolveComponent("BottomMenu"))()}const h=t._export_sfc(d,[["render",function(e,i,o,s,r,a){return{a:t.t(e.$t("Training Points")),b:t.t(r.training.totalAixa),c:t.p({d:"M6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11Z",stroke:"white","stroke-opacity":"0.6","stroke-width":"0.8","stroke-linecap":"round","stroke-linejoin":"round"}),d:t.p({d:"M6 8V6",stroke:"white","stroke-opacity":"0.6","stroke-width":"0.8","stroke-linecap":"round","stroke-linejoin":"round"}),e:t.p({d:"M6 4H6.00417",stroke:"white","stroke-opacity":"0.6","stroke-width":"0.8","stroke-linecap":"round","stroke-linejoin":"round"}),f:t.p({"clip-path":"url(#clip0_67_2555)"}),g:t.p({width:"12",height:"12",fill:"white"}),h:t.p({id:"clip0_67_2555"}),i:t.p({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),j:t.t(e.$t("TraTip1")),k:t.t(r.training.rewardIncrement),l:t.t(e.$t("highest")),m:t.t(r.training.rewardFixed),n:t.t(e.$t("points")),o:t.t(e.$t("Bind to Superior")),p:r.canBind,q:t.p({d:"M5.00024 6.49998C5.21497 6.78705 5.48892 7.02457 5.80352 7.19645C6.11812 7.36833 6.466 7.47054 6.82357 7.49615C7.18114 7.52176 7.54004 7.47017 7.87592 7.34487C8.2118 7.21958 8.5168 7.02352 8.77025 6.76998L10.2702 5.26998C10.7256 4.79848 10.9776 4.16697 10.9719 3.51148C10.9662 2.85599 10.7033 2.22896 10.2398 1.76544C9.77627 1.30192 9.14924 1.03899 8.49375 1.0333C7.83826 1.0276 7.20675 1.27959 6.73524 1.73498L5.87524 2.58998",stroke:"white","stroke-width":"0.857143","stroke-linecap":"round","stroke-linejoin":"round"}),r:t.p({d:"M6.99986 5.50011C6.78513 5.21305 6.51118 4.97552 6.19658 4.80364C5.88198 4.63176 5.5341 4.52955 5.17653 4.50395C4.81896 4.47834 4.46006 4.52993 4.12418 4.65522C3.7883 4.78051 3.4833 4.97658 3.22986 5.23011L1.72986 6.73011C1.27446 7.20162 1.02247 7.83312 1.02817 8.48862C1.03387 9.14411 1.29679 9.77114 1.76031 10.2347C2.22383 10.6982 2.85086 10.9611 3.50635 10.9668C4.16184 10.9725 4.79335 10.7205 5.26486 10.2651L6.11986 9.41011",stroke:"white","stroke-width":"0.857143","stroke-linecap":"round","stroke-linejoin":"round"}),s:t.p({opacity:"0.6","clip-path":"url(#clip0_67_2543)"}),t:t.p({width:"12",height:"12",fill:"white"}),v:t.p({id:"clip0_67_2543"}),w:t.p({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),x:t.o((t=>r.navshows=!1)),y:t.o((t=>r.navshows=!0)),z:r.bindAddress,A:t.o((t=>r.bindAddress=t.detail.value)),B:r.canBind,C:t.t(e.$t("Bind Now")),D:r.canBind,E:n._imports_0,F:t.t(e.$t("Start training")),G:r.Start,H:n._imports_1,I:t.t(e.$t("Cooling down")),J:t.t(r.time),K:r.timeShow,L:t.o(((...t)=>a.bind&&a.bind(...t))),M:r.navshows,N:t.p({active:"training"})}}],["__scopeId","data-v-286257a3"]]);wx.createPage(h);
