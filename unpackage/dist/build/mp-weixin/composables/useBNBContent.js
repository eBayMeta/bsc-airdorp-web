"use strict";require("../common/vendor.js"),exports.detectAndSwitchToBNB=async function(){if(void 0!==window.ethereum)try{if("0x38"===await window.ethereum.request({method:"eth_chainId"}))return console.log("已连接到BNB Smart Chain主网"),!0;try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x38"}]}),console.log("已切换到BNB Smart Chain主网"),!0}catch(e){if(4902===e.code)return await async function(){try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x38",chainName:"BNB Smart Chain",rpcUrls:["https://bsc-dataseed1.binance.org:443"],nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},blockExplorerUrls:["https://bscscan.com"]}]}),console.log("BNB网络已添加到MetaMask")}catch(e){console.error("添加BNB网络时出错:",e)}}(),!0;throw e}}catch(t){return console.error("切换网络时出错:",t),!1}return!1};
